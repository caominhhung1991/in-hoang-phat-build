(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{346:function(e,a,n){"use strict";var t=n(0),o=n.n(t),r=function(){return o.a.createElement("span",{className:"text-danger"},"*")},c=n(51),l=n(77),i=n(79),h=n(78),s=n(37),u=n(165),m=(n(708),n(235)),g=n(701),d=n(713),p=n(947),f=n(932),E=n(933),C=n(704),y=n(696);function b(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,t=Object(s.a)(e);if(a){var o=Object(s.a)(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return Object(h.a)(this,n)}}var v=function(e){Object(i.a)(n,e);var a=b(n);function n(){var e;Object(c.a)(this,n);for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).priceFormatter=function(e,a){return"dong "+e},e.onChoose=function(a){var n=e.props,t=n.close,r=n.getCustomerByPhone;return o.a.createElement(d.a,{size:"sm",color:"primary",onClick:function(){r({soDienThoai:a}),t()}},"Ch\u1ecdn")},e.options={sizePerPage:25,onDeleteRow:function(a){a.map(function(e){return Object(y.g)({customer:e}),null}),e.props.getCustomers(),e.props.getCustomersPhones()}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,a=e.isOpen,n=e.customers,t=this.props.close,r=o.a.createElement("button",{className:"close",onClick:t},"\xd7"),c=Object(u.toArray)(n);return o.a.createElement("div",{id:"orderDetailModal"},o.a.createElement(p.a,{isOpen:a,toggle:t,size:"lg",fade:!1},o.a.createElement(f.a,{toggle:t,close:r},"Kh\xe1ch H\xe0ng"),o.a.createElement(E.a,null,o.a.createElement(C.BootstrapTable,{data:c,striped:!0,hover:!0,search:!0,pagination:!0,options:this.options,selectRow:{mode:"checkbox"},deleteRow:!0},o.a.createElement(C.TableHeaderColumn,{dataField:"soDienThoai",dataFormat:this.onChoose},"Action"),o.a.createElement(C.TableHeaderColumn,{dataField:"congTy",isKey:!0},"C\xf4ng ty"),o.a.createElement(C.TableHeaderColumn,{dataField:"soDienThoai"},"S\u0110T"),o.a.createElement(C.TableHeaderColumn,{dataField:"diaChi"},"\u0110\u1ecba ch\u1ec9"),o.a.createElement(C.TableHeaderColumn,{dataField:"nguoiDatHang"},"Li\xean h\u1ec7")))))}}]),n}(t.Component),k=Object(m.b)(function(e){return{customers:e.sacMauMoi.customers}},{getCustomers:g.a,getCustomersPhones:g.b})(v);n.d(a,"b",function(){return r}),n.d(a,"a",function(){return k})},708:function(e,a,n){},803:function(e,a,n){},938:function(e,a,n){"use strict";n.r(a);var t=n(80),o=n(9),r=n(114),c=n.n(r),l=n(169),i=n(51),h=n(77),s=n(79),u=n(78),m=n(37),g=n(0),d=n.n(g),p=n(235),f=n(236),E=(n(803),n(703)),C=n.n(E),y=n(700),b=n.n(y),v=n(740),k=n(725),O=n(741),T=n(805),j=n(742),D=n(931),x=n(713),P=n(930),H=n(696),w=function(e){var a=e.sanpham,n=e.index,t=e.isViewing,o=e.onClickSua,r=e.onClickXoa;return d.a.createElement("tr",null,d.a.createElement("td",null,a.tenSanPham),d.a.createElement("td",null,"".concat(a.moTa)),d.a.createElement("td",null,a.donViTinh),d.a.createElement("td",null,Object(H.h)(a.soLuong)),d.a.createElement("td",null,Object(H.h)(a.donGia)),d.a.createElement("td",null,Object(H.h)(a.thanhTien)),t?null:d.a.createElement("td",null,d.a.createElement(x.a,{outline:!0,size:"sm",color:"warning",className:"mr-2",id:"nutSua",onClick:function(){return o({index:n})}},d.a.createElement("i",{className:"fa fa-edit fa-lg"})),d.a.createElement(P.a,{placement:"bottom",target:"nutSua"},"S\u1eeda"),d.a.createElement(x.a,{outline:!0,size:"sm",color:"danger",id:"nutXoa",onClick:function(){return r({index:n})}},d.a.createElement("i",{className:"fa fa-trash fa-lg"})),d.a.createElement(P.a,{placement:"bottom",target:"nutXoa"},"Xo\xe1")))},N=n(24);function S(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,t=Object(m.a)(e);if(a){var o=Object(m.a)(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return Object(u.a)(this,n)}}var F=function(e){Object(s.a)(n,e);var a=S(n);function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).renderPrintItems=function(){var a=e.props,n=a.donhang,t=a.isViewing,o=e.props,r=o.onClickSua,c=o.onClickXoa;return b()(n,[N.d.sanPhams.id],[]).map(function(e,a){return d.a.createElement(w,{onClickXoa:c,onClickSua:r,index:a,sanpham:e,key:a,isViewing:t})})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.isViewing;return d.a.createElement(O.a,null,d.a.createElement(T.a,null,d.a.createElement("strong",null,"S\u1ea3n ph\u1ea9m in")),d.a.createElement(j.a,null,d.a.createElement(D.a,{responsive:!0,striped:!0},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"T\xean s\u1ea3n ph\u1ea9m"),d.a.createElement("th",null,"M\xf4 t\u1ea3"),d.a.createElement("th",null,"\u0110VT"),d.a.createElement("th",null,"S\u1ed1 l\u01b0\u1ee3ng"),d.a.createElement("th",null,"\u0110\u01a1n gi\xe1"),d.a.createElement("th",null,"Th\xe0nh ti\u1ec1n"),e?null:d.a.createElement("th",null,"Ch\u1ee9c n\u0103ng"))),d.a.createElement("tbody",null,this.renderPrintItems()))))}}]),n}(g.Component),M=n(762),R=n(763),A=n(857),V=n(346),L=n(701),K=n(852),B=n.n(K),X=n(239);function G(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,t=Object(m.a)(e);if(a){var o=Object(m.a)(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return Object(u.a)(this,n)}}var z=function(e){Object(s.a)(n,e);var a=G(n);function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).state={showModal:!1},e.handleOpenModal=function(){e.setState({showModal:!0})},e.handleCloseModal=function(){e.setState({showModal:!1})},e.onChangeKhachHang=function(a){var n=e.props,t=n.onChangeValue,o=n.customers,r=n.customersPhones,c=n.onSelectKhachHang,l=a.target,i=l.name,h=l.value;(t(a,{type:"khachhang"}),"congTy"===i&&o&&o[h])&&c({khachhang:o[h]});"soDienThoai"===i&&r&&r[h]&&c({khachhang:r[h]})},e.onChangeDonHang=function(a){(0,e.props.onChangeValue)(a,{type:"donhang"})},e.getCustomerByPhone=function(){var a=Object(l.a)(c.a.mark(function a(n){var t,o,r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=n.soDienThoai,o=e.props.onChangeModel,a.next=4,Object(H.j)({type:"soDienThoai",value:t});case 4:if(r=a.sent){a.next=8;break}return X.toast.error(N.l),a.abrupt("return");case 8:o({type:"khachhang",value:r});case 9:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.addCustomerHandle=function(){var a=e.props.khachhang,n=e.props,t=n.getCustomers,o=n.getCustomersPhones;if(C()(a.soDienThoai))alert("Ch\u01b0a nh\u1eadp s\u1ed1 \u0111i\u1ec7n kh\xe1ch h\xe0ng.");else if(C()(a.congTy))alert("Ch\u01b0a nh\u1eadp t\xean c\xf4ng ty.");else{for(var r=0;r<a.soDienThoai.length;r++){var c=a.soDienThoai[r];if(-1==="0123456789 ".indexOf(c))return void X.toast.error(N.v)}window.confirm("Th\xeam kh\xe1ch h\xe0ng m\u1edbi?")&&Object(H.d)({khachhang:a}).then(function(e){!0!==e.result?(Object(H.a)({khachhang:a,type:"soDienThoai"}),Object(H.a)({khachhang:a,type:"congTy"}),X.toast.success(N.r),t(),o()):e.messages.map(function(e){return X.toast.error(e,{autoClose:4e3}),null})})}},e.updateCustomer=function(){var a=e.props,n=a.khachhang,t=a.getCustomers;Object(H.e)({khachhang:n}).then(function(e){!0===e.result?(Object(H.a)({khachhang:n,type:"soDienThoai"}),Object(H.a)({khachhang:n,type:"congTy"}),t(),X.toast.success(N.s)):X.toast.error(N.t,{autoClose:4e3})})},e.huyCustomer=function(){e.props.huyCustomer()},e.checkValidAddCustomer=function(){var a=e.props.khachhang,n=b()(a,[N.g.congTy.id],""),t=b()(a,[N.g.soDienThoai.id],"");return C()(n)||C()(t)},e.renderCustomerDatalist=function(){var a=e.props.customers,n=[];return a&&B()(a,function(e){n.push(d.a.createElement("option",{key:e.congTy,value:e.congTy}))}),n},e.onChangeDonGia=function(e){console.log(e.target.value)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getCustomers(),this.props.getCustomersPhones()}},{key:"render",value:function(){var e=this,a=this.props,n=a.khachhang,t=a.donhang,o=a.customers,r=a.onChangeModel,c=this.checkValidAddCustomer();return d.a.createElement("div",null,d.a.createElement(O.a,null,d.a.createElement(T.a,null,d.a.createElement("strong",null,"Th\xf4ng tin kh\xe1ch h\xe0ng")),d.a.createElement(j.a,null,d.a.createElement(M.a,{row:!0},d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"name"},"M\xe3 \u0111\u01a1n h\xe0ng"),d.a.createElement(A.a,{type:"text",name:"maDonHang",id:"maDonHang",value:t[N.d.maDonHang.id]||"",disabled:!0})),d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"ngayNhan"},"Ng\xe0y nh\u1eadn ",d.a.createElement(V.b,null)),d.a.createElement(A.a,{type:"date",name:"ngayNhan",id:"ngayNhan",value:t[N.d.ngayNhan.id]||"",required:!0,onChange:this.onChangeDonGia})),d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"ngayGiao"},"Ng\xe0y giao"),d.a.createElement(A.a,{type:"date",name:"ngayGiao",id:"ngayGiao",value:t[N.d.ngayGiao.id]||"",required:!0,onChange:this.onChangeDonGia}))),d.a.createElement(v.a,null,d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,null,d.a.createElement(R.a,{htmlFor:"congTy"},"Kh\xe1ch H\xe0ng ",d.a.createElement(V.b,null),d.a.createElement(x.a,{size:"sm",color:"success",className:"ml-2",onClick:this.handleOpenModal},"Ch\u1ecdn")),d.a.createElement(A.a,{type:"text",name:"congTy",id:"congTy",placeholder:"T\xean c\xf4ng ty",tabIndex:1,value:n[N.g.congTy.id]||"",onChange:this.onChangeKhachHang,list:"customers"}),d.a.createElement("datalist",{id:"customers"},this.renderCustomerDatalist()))),d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,null,d.a.createElement(R.a,{htmlFor:"soDienThoai"},"\u0110i\u1ec7n Tho\u1ea1i ",d.a.createElement(V.b,null),d.a.createElement(x.a,{size:"sm",color:"success",className:"ml-2",onClick:function(){return e.getCustomerByPhone(n)}},"Ki\u1ec3m tra")),d.a.createElement(A.a,{type:"phone",name:"soDienThoai",id:"soDienThoai",placeholder:"s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",value:n[N.g.soDienThoai.id]||"",onChange:this.onChangeKhachHang,tabIndex:2,maxLength:"13"})))),d.a.createElement(v.a,null,d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,null,d.a.createElement(R.a,{htmlFor:"nguoiDatHang"},"Ng\u01b0\u1eddi \u0110\u1eb7t H\xe0ng"),d.a.createElement(A.a,{type:"text",name:"nguoiDatHang",id:"nguoiDatHang",placeholder:"T\xean ng\u01b0\u1eddi \u0111\u1eb7t h\xe0ng",value:n[N.g.nguoiDatHang.id]||"",onChange:this.onChangeKhachHang,tabIndex:3}))),d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,null,d.a.createElement(R.a,{htmlFor:"email"},"Email"),d.a.createElement(A.a,{type:"email",name:"email",id:"email",value:n[N.g.email.id]||"",onChange:this.onChangeKhachHang,tabIndex:4})))),d.a.createElement(v.a,null,d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,null,d.a.createElement(R.a,{htmlFor:"diaChi"},"\u0110\u1ecba ch\u1ec9"),d.a.createElement(A.a,{type:"text",name:"diaChi",id:"diaChi",placeholder:"\u0110\u1ecba ch\u1ec9",value:n[N.g.diaChi.id]||"",onChange:this.onChangeKhachHang,tabIndex:5}))),d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,null,d.a.createElement(R.a,{htmlFor:N.g.thongTinXuatHoaDon.id},"Th\xf4ng tin xu\u1ea5t h\xf3a \u0111\u01a1n"),d.a.createElement("textarea",{id:N.g.thongTinXuatHoaDon.id,className:"form-control",name:N.g.thongTinXuatHoaDon.id,placeholder:N.g.thongTinXuatHoaDon.name,rows:1,value:n[N.g.thongTinXuatHoaDon.id]||"",onChange:this.onChangeKhachHang,tabIndex:6})))),d.a.createElement(M.a,null,d.a.createElement(x.a,{className:"mr-2",size:"sm",color:"primary",disabled:c,onClick:this.addCustomerHandle},d.a.createElement("i",{className:"fa fa-plus fa-lg"})," Kh\xe1ch H\xe0ng"),d.a.createElement(x.a,{id:"updateCustomer",className:"mr-2",disabled:c,outline:!0,size:"sm",color:"info",onClick:this.updateCustomer},"C\u1eadp nh\u1eadt"),d.a.createElement(x.a,{id:"huyXoaHang",className:"mr-2",size:"sm",outline:!0,color:"warning",onClick:this.huyCustomer},"H\u1ee7y")),d.a.createElement("hr",null),d.a.createElement(v.a,null,d.a.createElement(k.a,{lg:"8"},d.a.createElement(R.a,{htmlFor:"ghichu"},"Ghi ch\xfa kh\xe1ch h\xe0ng"),d.a.createElement("textarea",{className:"form-control",rows:"1",name:"ghiChuKhachHang",id:"ghiChuKhachHang",placeholder:"N\u1ed9i dung ghi ch\xfa",value:t[N.d.ghiChuKhachHang.id],onChange:this.onChangeDonHang})),d.a.createElement(k.a,{lg:"4"},d.a.createElement(R.a,{htmlFor:"ghichu"},"Ng\u01b0\u1eddi l\u1eadp \u0111\u01a1n"),d.a.createElement("input",{className:"form-control",name:"nguoiLapDon",id:"nguoiLapDon",placeholder:"T\xean ng\u01b0\u1eddi l\u1eadp \u0111\u01a1n",value:t[N.d.nguoiLapDon.id],onChange:this.onChangeDonHang}))))),d.a.createElement(V.a,{customers:o,getCustomerByPhone:this.getCustomerByPhone,isOpen:this.state.showModal,close:this.handleCloseModal,chooseCustomer:this.onChooseCustomer,onChangeModel:r}))}}]),n}(g.Component);z.defaultProsp={khachhang:{},donhang:{}};var I=Object(f.a)(Object(p.b)(function(e){var a=e.sacMauMoi;return{customers:a.customers,customersPhones:a.customersPhones}},{getCustomers:L.a,getCustomersPhones:L.b}))(z),U=n(165);function _(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,t=Object(m.a)(e);if(a){var o=Object(m.a)(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return Object(u.a)(this,n)}}var q=function(e){Object(s.a)(n,e);var a=_(n);function n(){var e;Object(i.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(e=a.call.apply(a,[this].concat(o))).state={},e.onChangeDonGia=function(a){(0,e.props.onChangeValue)(a,{type:"donhang"})},e.onChangeSanPham=function(a){(0,e.props.onChangeValue)(a,{type:"sanpham"})},e.onChangeDonHang=function(a){(0,e.props.onChangeValue)(a,{type:"donhang"})},e.onClickAdd=function(){var a=e.props.sanpham,n=a.soLuong,t=a.donGia,o=e.props,r=o.sanpham,c=o.onAddSanPham;r.thanhTien=Number(n)*Number(t),c({sanpham:r})},e.onClickHuy=function(){e.props.onClickHuy()},e.checkValidAddOrder=function(){var a=e.props.sanpham,n=a.tenSanPham,t=a.donViTinh,o=a.soLuong,r=a.donGia;return!(Object(U.isEmpty)(n)||Object(U.isEmpty)(t)||Object(U.isEmpty)(o)||Object(U.isEmpty)(r))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props,a=e.donhang,n=a.tongTien,t=a.tamUng,o=e.isValidToFinish,r=this.props,c=r.sanpham,l=r.sanpham,i=l.tenSanPham,h=l.donViTinh,s=l.soLuong,u=l.donGia,m=l.moTa,g=this.props,p=g.onPrint,f=g.onLuuAndPrint,E=g.onCheck,C=n-t,y=Object(U.isEmpty)(s)||Object(U.isEmpty)(u)?0:Object(H.h)(Number(s)*Number(u)),b=this.checkValidAddOrder();return d.a.createElement(O.a,null,d.a.createElement(T.a,null,d.a.createElement("strong",null,"\u0110\u01a1n H\xe0ng")),d.a.createElement(j.a,null,d.a.createElement(M.a,{row:!0},d.a.createElement(k.a,{xs:"12"},d.a.createElement(R.a,null,d.a.createElement("strong",null,"Th\xeam s\u1ea3n ph\u1ea9m")," ",d.a.createElement(V.b,null))),d.a.createElement(k.a,{xs:"4",style:{paddingRight:0}},d.a.createElement(R.a,{htmlFor:"ngaygiao"},"T\xean"),d.a.createElement("textarea",{className:"form-control",rows:"1",name:"tenSanPham",id:"tenSanPham",placeholder:"Nh\u1eadp t\xean h\xe0ng",value:i,onChange:this.onChangeSanPham})),d.a.createElement(k.a,{xs:"2",style:{paddingRight:0}},d.a.createElement(R.a,{htmlFor:"ngaygiao"},"\u0110VT"),d.a.createElement(A.a,{type:"text",name:"donViTinh",id:"donViTinh",placeholder:"\u0110VT",value:h,onChange:this.onChangeSanPham})),d.a.createElement(k.a,{xs:"3"},d.a.createElement(R.a,{htmlFor:"ngaygiao"},"SL"),d.a.createElement(A.a,{type:"tel",name:"soLuong",id:"soluong",placeholder:"s\u1ed1 l\u01b0\u1ee3ng",min:"0",step:"1 ",value:s,onChange:this.onChangeSanPham})),d.a.createElement(k.a,{xs:"3"},d.a.createElement(R.a,{htmlFor:"ngaygiao"},"\u0110\u01a1n gi\xe1"),d.a.createElement(A.a,{type:"number",name:"donGia",id:"dongia",placeholder:"\u0110\u01a1n gi\xe1",min:"0",step:"100",value:u,onChange:this.onChangeSanPham}))),d.a.createElement(M.a,{row:!0},d.a.createElement(k.a,{xs:"8"},d.a.createElement(R.a,{htmlFor:"ghichu"},"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea7m"),d.a.createElement("textarea",{className:"form-control",rows:"2",name:"moTa",id:"moTa",placeholder:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m",value:m,onChange:this.onChangeSanPham})),d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"options"},"Options"),d.a.createElement(M.a,{check:!0,className:"checkbox"},d.a.createElement(A.a,{className:"form-check-input",type:"checkbox",id:N.o.inNhanh.id,name:N.o.inNhanh.id,value:c[N.o.inNhanh.id],checked:!0===c[N.o.inNhanh.id],onChange:E}),d.a.createElement(R.a,{check:!0,className:"form-check-label",htmlFor:N.o.inNhanh.id},N.o.inNhanh.name)))),d.a.createElement(M.a,null,d.a.createElement(x.a,{className:"mr-2",size:"sm",color:"primary",disabled:!b,onClick:this.onClickAdd},d.a.createElement("i",{className:"fa fa-plus fa-lg"})," Th\xeam"),d.a.createElement(x.a,{size:"sm",outline:!0,disabled:!b,color:"danger",className:"mr-2",onClick:this.onClickHuy},"Hu\u1ef7"),d.a.createElement("span",null,d.a.createElement("strong",null,"Th\xe0nh ti\u1ec1n: ",y))),d.a.createElement("hr",null),d.a.createElement(v.a,null,d.a.createElement(k.a,{lg:"6"},d.a.createElement(M.a,{row:!0},d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"tongTien"},"T\u1ed5ng ti\u1ec1n")),d.a.createElement(k.a,{xs:"8"},d.a.createElement(A.a,{disabled:!0,type:"text",name:"tongTien",id:"tongTien",placeholder:"t\u1ed5ng ti\u1ec1n \u0111\u01a1n h\xe0ng",value:Object(H.h)(n)}))),d.a.createElement(M.a,{row:!0},d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"tamUng"},"T\u1ea1m \u1ee9ng")),d.a.createElement(k.a,{xs:"8"},d.a.createElement(A.a,{type:"number",name:"tamUng",id:"tamUng",placeholder:"t\u1ea1m \u1ee9ng t\u1eeb kh\xe1ch h\xe0ng",value:t||"",onChange:this.onChangeDonHang,step:"1000"}))),d.a.createElement(M.a,{row:!0},d.a.createElement(k.a,{xs:"4"},d.a.createElement(R.a,{htmlFor:"conLai"},"C\xf2n l\u1ea1i")),d.a.createElement(k.a,{xs:"8"},d.a.createElement(A.a,{disabled:!0,type:"text",name:"conLai",id:"conLai",placeholder:"s\u1ed1 ti\u1ec1n c\xf2n l\u1ea1i",value:Object(H.h)(C)}))))),d.a.createElement(M.a,{style:{marginBottom:0},row:!0},d.a.createElement(k.a,{xs:"6"},d.a.createElement(x.a,{disabled:o,block:!0,color:"success",onClick:f,size:"sm"},"L\u01b0u v\xe0 In")),d.a.createElement(k.a,{xs:"6"},d.a.createElement(x.a,{outline:!0,disabled:o,block:!0,color:"success",onClick:p,size:"sm"},"Xem tr\u01b0\u1edbc ",d.a.createElement("i",{className:"fa fa-print","aria-hidden":"true"}))))))}}]),n}(g.Component),J=n(764),W=n(345),Y=n(233);function Q(e){var a=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,t=Object(m.a)(e);if(a){var o=Object(m.a)(this).constructor;n=Reflect.construct(t,arguments,o)}else n=t.apply(this,arguments);return Object(u.a)(this,n)}}n.d(a,"ThemDonHang",function(){return Z});var Z=function(e){Object(s.a)(n,e);var a=Q(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,h=new Array(r),s=0;s<r;s++)h[s]=arguments[s];return(e=a.call.apply(a,[this].concat(h))).state={},e.initDonHang=Object(l.a)(c.a.mark(function a(){var n;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=new J.a,a.next=3,Object(H.l)({date:new Date});case 3:n.maDonHang=a.sent,n.ngayNhan=Object(H.k)({date:new Date}),n.maNgay=Object(H.k)({date:new Date}),n.ngayGiao="",e.setState({donhang:n});case 8:case"end":return a.stop()}},a)})),e.onChangeValue=function(a,n){var r=n.type,c={donhang:e.state.donhang,khachhang:e.state.khachhang,sanpham:e.state.sanpham};e.setState(Object(t.a)({},r,Object(o.a)({},c[r],Object(t.a)({},a.target.name,a.target.value))))},e.onSelectKhachHang=function(a){var n=a.khachhang;e.setState({khachhang:n})},e.onChangeModel=function(a){var n=a.type,o=a.value;e.setState(Object(t.a)({},n,o))},e.onCheck=function(a){var n=b()(e.state.sanpham,[N.o.inNhanh.id],!1);e.setState({sanpham:Object(o.a)({},e.state.sanpham,Object(t.a)({},N.o.inNhanh.id,!n))})},e.onAddSanPham=function(a){var n=a.sanpham,t=e.state.donhang;t.sanPhams.push(n),t.tongTien+=n.thanhTien,e.setState({donhang:Object(o.a)({},t,{sanPhams:t.sanPhams}),sanpham:new J.c})},e.onClickHuy=function(){e.setState({sanpham:new J.c})},e.onClickSua=function(a){var n=a.index,t=e.state.donhang.sanPhams[n];e.setState({sanpham:t}),e.onClickXoa({index:n})},e.onClickXoa=function(a){var n=a.index,t=e.state.donhang,r=t.sanPhams[n].thanhTien,c=t.sanPhams.filter(function(e,a){return a!==n});t.tongTien=t.tongTien-r,e.setState({donhang:Object(o.a)({},t,{sanPhams:c})})},e.checkValidToFinish=function(){var a=e.state,n=a.donhang,t=a.khachhang;return C()(n.ngayNhan)||C()(n.sanPhams)||C()(t.congTy)||C()(t.soDienThoai)},e.automationAddCustomer=function(){var a=Object(l.a)(c.a.mark(function a(n){var t,o,r,l,i;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=n.khachhang,o=e.props.customers[t.congTy],r=e.props.customersPhones[t.soDienThoai],o||r){a.next=20;break}l=0;case 5:if(!(l<t.soDienThoai.length)){a.next=13;break}if(i=t.soDienThoai[l],-1!=="0123456789 ".indexOf(i)){a.next=10;break}return X.toast.error(N.v),a.abrupt("return");case 10:l++,a.next=5;break;case 13:return Object(H.a)({khachhang:t,type:"soDienThoai"}),Object(H.a)({khachhang:t,type:"congTy"}),e.props.getCustomers(),e.props.getCustomersPhones(),a.abrupt("return",!0);case 20:if(o||!r){a.next=25;break}return X.toast.error("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 t\u1ed3n t\u1ea1i"),a.abrupt("return",!1);case 25:if(!o||r){a.next=28;break}return X.toast.error("T\xean c\xf4ng ty \u0111\xe3 t\u1ed3n t\u1ea1i"),a.abrupt("return",!1);case 28:return a.abrupt("return",!0);case 29:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}(),e.onPrint=Object(l.a)(c.a.mark(function a(){var n,t,r,l,i,h,s,u;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.state,t=n.donhang,r=t.tongTien,l=t.tamUng,i=n.khachhang,h=Object(o.a)({},e.state.donhang),s=new Date,u=Object(H.m)(),a.next=6,Object(H.l)({date:s});case 6:h.maDonHang=a.sent,h.conLai=Number(r)-Number(l),h.khachhang=i,h.createAt=u.time,h.modifiedAt=u.time,h.month=u.month,h.year=u.year,h.sanPhams.forEach(function(e){h.sanPhamsName+="".concat(e.tenSanPham,", ")}),e.printPDF({donhang:h,khachhang:i});case 15:case"end":return a.stop()}},a)})),e.onLuuAndPrint=Object(l.a)(c.a.mark(function a(){var n,t,r,l,i,h,s,u,m,g,d;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.props.history,t=e.state,r=t.firebase,l=t.donhang,i=t.khachhang,h=b()(l,"tongTien",0),s=b()(l,"tamUng",0),u=b()(r,["auth","currentUser","email"],""),m=Object(o.a)({},l),g=new Date,d=Object(H.m)(),a.next=10,Object(H.l)({date:g});case 10:return m.maDonHang=a.sent,m.conLai=Number(h)-Number(s),m.khachhang=i,m.createAt=d.time,m.modifiedAt=d.time,m.modifiedBy=u,m.month=d.month,m.year=d.year,m.sanPhams.forEach(function(e){m.sanPhamsName+="".concat(e.tenSanPham,", ")}),a.next=21,e.automationAddCustomer({khachhang:i});case 21:if(a.sent){a.next=24;break}return a.abrupt("return");case 24:if(window.confirm("Th\xeam \u0111\u01a1n h\xe0ng!")){a.next=27;break}return a.abrupt("return");case 27:e.printPDF({donhang:m,khachhang:i}),Object(H.b)({donhang:m}),e.initDonHang(),e.setState({khachhang:{}}),n.push("?");case 32:case"end":return a.stop()}},a)})),e.printPDF=function(e){var a=e.donhang,n=e.khachhang;Object(W.a)({donhang:a,khachhang:n})},e.huyCustomer=function(){e.setState({khachhang:new J.b})},e}return Object(h.a)(n,[{key:"componentWillMount",value:function(){var e=new J.a,a=new J.c,n=new J.b;this.setState({donhang:e,sanpham:a,khachhang:n})}},{key:"componentDidMount",value:function(){var e=this,a=this.props,n=a.location,t=a.getDonHang,o=a.getKhachHang;this.initDonHang();var r=new URLSearchParams(n&&n.search?n.search:""),i=r.get(N.m.MODAL_ID),h=r.get(N.m.DONHANG_ID),s=r.get(N.m.YEAR_ID);if(i===N.j.suDungLaiDonHang.id&&h&&s){var u=[s,h];(function(){var a=Object(l.a)(c.a.mark(function a(){var n,r,l;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t(u);case 2:return n=a.sent,a.next=5,Object(H.l)({date:new Date});case 5:return n.maDonHang=a.sent,r=b()(n,["khachhang",N.g.soDienThoai.id],""),a.next=9,o([N.g.soDienThoai.id,r]);case 9:l=a.sent,N.d.getArrayFieldsInit().forEach(function(e){var a=e.field||{},t=e.value;n.hasOwnProperty(a.id)&&(n[a.id]=t)}),e.setState({donhang:n,khachhang:l});case 13:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}})()()}}},{key:"render",value:function(){var e=this.checkValidToFinish();return d.a.createElement(v.a,{className:"mt-3"},d.a.createElement(k.a,{lg:"6",md:"12"},d.a.createElement(I,{donhang:this.state.donhang,khachhang:this.state.khachhang,onChangeValue:this.onChangeValue,onChangeModel:this.onChangeModel,huyCustomer:this.huyCustomer,onSelectKhachHang:this.onSelectKhachHang})),d.a.createElement(k.a,{lg:"6",md:"12"},d.a.createElement(q,{donhang:this.state.donhang,sanpham:this.state.sanpham,onChangeValue:this.onChangeValue,onAddSanPham:this.onAddSanPham,onClickHuy:this.onClickHuy,isValidToFinish:e,onPrint:this.onPrint,onLuuAndPrint:this.onLuuAndPrint,onChangeModel:this.onChangeModel,onCheck:this.onCheck})),d.a.createElement(k.a,{lg:"12",md:"12"},d.a.createElement(F,{donhang:this.state.donhang,onClickXoa:this.onClickXoa,onClickSua:this.onClickSua,onChangeModel:this.onChangeModel})))}}]),n}(g.Component),$=Object(f.a)(Object(p.b)(function(e){return{customers:e.sacMauMoi.customers,customersPhones:e.sacMauMoi.customersPhones}},{getCustomers:Y.b,getDonHangs:Y.g,getDonHang:Y.f,getKhachHang:Y.h,getCustomersPhones:Y.c}));a.default=$(Z)}}]);